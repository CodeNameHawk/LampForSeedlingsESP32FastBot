# Контроллер Лампы для Рассады

Умный контроллер освещения на базе ESP32 с управлением через Telegram бот. Проект выходного дня для любителей растениеводства.

## Обзор

Дополнительное освещение играет важную роль в обеспечении здорового роста и развития рассады. Недостаток естественного света может привести к тому, что рассада будет вытягиваться, становиться слабой и подверженной заболеваниям.

Растениям обычно требуется 12-16 часов света в сутки, в зависимости от их потребностей. Этот контроллер помогает поддерживать оптимальное освещение, автоматически управляя лампами утром и вечером в дополнение к естественному дневному свету.

## Возможности

- Таймер на базе ESP32
- Интерфейс Telegram бота для удаленного управления и мониторинга
- Настраиваемые расписания освещения
- Мониторинг состояния в реальном времени
- Обновление прошивки по воздуху (OTA)
- Поддержка LittleFS для хранения расписаний

## Требования к оборудованию

- Плата разработки ESP32
- Блок питания 5В (подходит USB зарядка на 2А)
- Релейный модуль (одно- или двухканальный, берите двух канальный, "запас карман не тянет")
- Лампа для рассады 

## Схема подключения 

   Сетевое напряжение подается на блок питания и через разомкнутый контакт реле, на лампу.
   +5В и GND, с блока питания, подается на модуль есп и на питание реле, на вывод JC-VCC.
   Вывод GPIO33 модуля есп подключается к In2 на модуле реле.
   Вывод +3,3В подключается к VCC.


## Инструкция по настройке

1. Создайте Telegram бота(назовите его "Лампа для Рассады") и получите токен и ID
   - Следуйте [инструкции по FastBot Telegram](https://kit.alexgyver.ru/tutorials/telegram-basic/)
   - Сохраните токен бота и ID пользователя на листке бумаги

2. Настройте устройство
   - Используйте Arduino Release v3.1.3 [Arduino core for esp32](https://github.com/espressif/arduino-esp32)
   - Для настройки ESP32 см. [Руководство по программированию ESP32](https://alash-electronics.kz/blogs/projects-arduino/esp32)
   - Скачайте и устоновите библиотеку FastBot [FastBot](https://github.com/GyverLibs/FastBot)
   - Введите учетные данные своего WiFi и токены Telegram в `Secrets.ino`
   - Подключите модуль есп32 к компьютеру и загрузите код в ESP32, нажав на кнопку UpLoad.
   - Если все сделали правильно, в телеграмме должно появиться сообщение о старте программы.
   - Проверьте включается ли лампа при нажатии на "/Light_on"

3. Настройте интервалы таймера
   - Используйте [Генератор интервалов таймера](https://github.com/CodeNameHawk/TimerIntervals)
   - Загрузите сгенерированное расписание через Telegram бота, отправьте боту файл timerintervals.txt 

## Команды

- `/Light_on` - Включить лампу
- `/Light_off` - Выключить лампу
- `/Status` - Проверить текущее состояние
- `/Timer` - Просмотреть интервалы таймера

## Структура проекта

- `LampForSeedlingsESP32FastBot.ino` - Основной файл программы
- `LampControl.ino` - Логика управления лампой
- `TelegramControl.ino` - Обработчики команд Telegram
- `Variables.ino` - Глобальные переменные и конфигурации
- `OTA.ino` - Функционал обновления по воздуху
- `Secrets.ino` - Учетные данные WiFi и Telegram

## Лицензия

Этот проект является открытым исходным кодом и доступен под лицензией MIT.